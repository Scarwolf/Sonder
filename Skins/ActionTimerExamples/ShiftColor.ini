[Rainmeter]
Update=1000
DynamicWindowSize=1
AccurateText=1

[Variables]
W=30
U=[!UpdateMeasure MeasureShiftColor][!UpdateMeter MeterRandomBar][!Redraw]
TargetValue=50
Red=60
Green=150
Blue=60

[MeasureRandom]
Measure=Calc
Formula=Random
LowBound=0
HighBound=100
UpdateRandom=1
UniqueRandom=1
MinValue=0
MaxValue=100
UpdateDivider=2
IfCondition=MeasureRandom > #TargetValue#
IfTrueAction=[!CommandMeasure MeasureShiftColor "Stop 2"][!CommandMeasure MeasureShiftColor "Execute 1"]
IfFalseAction=[!CommandMeasure MeasureShiftColor "Stop 1"][!CommandMeasure MeasureShiftColor "Execute 2"]

[MeasureShiftColor]
Measure=Plugin
Plugin=ActionTimer
ActionList1=Repeat ShiftGR,#W#,45
ShiftGR=[!SetVariable Red "(Clamp(#Red#+2,60,150))"][!SetVariable Green "(Clamp(#Green#-2,60,150))"]#U#
ActionList2=Repeat ShiftRG,#W#,45
ShiftRG=[!SetVariable Red "(Clamp(#Red#-2,60,150))"][!SetVariable Green "(Clamp(#Green#+2,60,150))"]#U#
DynamicVariables=1

[MeterRandomBar]
Meter=Bar
MeasureName=MeasureRandom
W=250
H=25
BarColor=#Red#,#Green#,#Blue#,255
SolidColor=40,40,40,255
BarOrientation=Horizontal
DynamicVariables=1

[MeterRandomLabel]
Meter=String
X=5
Y=2
FontFace=Fira Sans Light
FontSize=14
FontColor=255,255,255,255
SolidColor=0,0,0,1
AntiAlias=1
Text=Random Percent

[MeterRandom]
Meter=String
MeasureName=MeasureRandom
X=245
Y=2
StringAlign=Right
FontFace=Fira Sans Light
FontSize=14
FontColor=255,255,255,255
SolidColor=0,0,0,1
AntiAlias=1
NumOfDecimals=1
Text=%1%
