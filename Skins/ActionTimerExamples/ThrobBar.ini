[Rainmeter]
Update=1000
DynamicWindowSize=1
AccurateText=1

[Variables]
TargetValue=30
W=20
U=[!UpdateMeasureGroup ThrobBar][!UpdateMeterGroup ThrobBar][!Redraw]
Red=50
Green=140
Blue=50

[MeasureCPU]
Measure=CPU
MinValue=0
MaxValue=100
IfCondition=MeasureCPU > #TargetValue#
IfTrueAction=[!CommandMeasure MeasureThrobBar "Execute 1"]
IfFalseAction=[!SetVariable Red "50"][!SetVariable Green "140"][!SetVariable Blue "50"]#U#
IfConditionMode=1

[MeasureThrobBar]
Measure=Plugin
Plugin=ActionTimer
Group=ThrobBar
ActionList1=ThrobStart|Wait 300|Repeat ThrobUp,#W#,9|Wait #W#|Repeat ThrobDown,#W#,9
ThrobStart=[!SetVariable Red "140"][!SetVariable Green "50"][!SetVariable Blue "50"]#U#
ThrobUp=[!SetVariable Red "(Clamp(#Red#-10,50,140))"][!SetVariable Green "(Clamp(#Green#+10,50,140))"]#U#
ThrobDown=[!SetVariable Red "(Clamp(#Red#+10,50,140))"][!SetVariable Green "(Clamp(#Green#-10,50,140))"]#U#
DynamicVariables=1

[MeterCPUBar]
Meter=Bar
Group=ThrobBar
MeasureName=MeasureCPU
W=200
H=20
BarColor=#Red#,#Green#,#Blue#,255
SolidColor=40,40,40,255
BarOrientation=Horizontal
UpdateDivider=-1
DynamicVariables=1

[MeterCPULabel]
Meter=String
X=5
Y=2
FontSize=11
FontColor=255,255,255,255
SolidColor=0,0,0,1
AntiAlias=1
Text=CPU

[MeterCPU]
Meter=String
MeasureName=MeasureCPU
X=195
Y=2
StringAlign=Right
FontSize=11
FontColor=255,255,255,255
SolidColor=0,0,0,1
AntiAlias=1
NumOfDecimals=1
Text=%1%
